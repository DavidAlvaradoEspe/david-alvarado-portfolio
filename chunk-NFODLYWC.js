import{a as f}from"./chunk-Z6SLAXJD.js";import"./chunk-ECE5LYUU.js";import{d as l}from"./chunk-3I5CJTBG.js";import"./chunk-NPZEPKVW.js";import"./chunk-FWZ75RMU.js";import"./chunk-OPJEXU7D.js";import"./chunk-XXSLHR3E.js";import{a as b}from"./chunk-3WG2WLZ4.js";import"./chunk-ZUHEGR2G.js";import"./chunk-PMYBMJFK.js";import"./chunk-CJK33JLH.js";import"./chunk-YVY7FGQB.js";var n=class extends f{constructor(a){if(super(a),!a.variable&&!a.variables)throw new Error("FlowGraphSetVariableBlock: variable/variables is not defined");if(a.variables&&a.variable)throw new Error("FlowGraphSetVariableBlock: variable and variables are both defined");if(a.variables)for(let i of a.variables)this.registerDataInput(i,l);else this.registerDataInput("value",l)}_execute(a,i){if(this.config?.variables)for(let t of this.config.variables)this._saveVariable(a,t);else this._saveVariable(a,this.config?.variable,"value");this.out._activateSignal(a)}_saveVariable(a,i,t){let e=a._getGlobalContextVariable("currentlyRunningAnimationGroups",[]);for(let o of e){let s=a.assetsContext.animationGroups.find(r=>r.uniqueId==o);if(s){for(let r of s.targetedAnimations)if(r.target===a&&r.animation.targetProperty===i){s.stop();let u=e.indexOf(o);u>-1&&e.splice(u,1),a._setGlobalContextVariable("currentlyRunningAnimationGroups",e);break}}}let p=this.getDataInput(t||i)?.getValue(a);a.setVariable(i,p)}getClassName(){return"FlowGraphSetVariableBlock"}serialize(a){super.serialize(a),a.config.variable=this.config?.variable}};b("FlowGraphSetVariableBlock",n);export{n as FlowGraphSetVariableBlock};
