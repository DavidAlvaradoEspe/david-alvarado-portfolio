import{a as _}from"./chunk-MOC7B3LS.js";import{a as n,b as o,c as r,d as u}from"./chunk-2Z4SF5QS.js";import"./chunk-EDQRXR3Q.js";import"./chunk-3CQOVPBJ.js";import"./chunk-NYOR2HEC.js";import"./chunk-FWZ75RMU.js";import"./chunk-OPJEXU7D.js";import"./chunk-3WG2WLZ4.js";import"./chunk-ZUHEGR2G.js";import"./chunk-CWQQB2EJ.js";import"./chunk-PMYBMJFK.js";import"./chunk-CJK33JLH.js";import"./chunk-PTJ4CXVK.js";import{g as a}from"./chunk-YVY7FGQB.js";var N=(()=>{class e extends _{constructor(t,s,d,i){super(t,d),this._spatial=null,this._spatialAutoUpdate=!0,this._spatialMinUpdateTime=0,this._stereo=null,typeof i.spatialAutoUpdate=="boolean"&&(this._spatialAutoUpdate=i.spatialAutoUpdate),typeof i.spatialMinUpdateTime=="number"&&(this._spatialMinUpdateTime=i.spatialMinUpdateTime),this._audioContext=this.engine._audioContext,this._webAudioNode=s,this._subGraph=new e._SubGraph(this)}_initAsync(t){return a(this,null,function*(){t.outBus?this.outBus=t.outBus:t.outBusAutoDefault!==!1&&(yield this.engine.isReadyPromise,this.outBus=this.engine.defaultMainBus),yield this._subGraph.initAsync(t),n(t)&&this._initSpatialProperty(),this.engine._addNode(this)})}get _inNode(){return this._webAudioNode}get _outNode(){return this._subGraph._outNode}get spatial(){return this._spatial?this._spatial:this._initSpatialProperty()}get stereo(){return this._stereo??(this._stereo=new o(this._subGraph))}dispose(){super.dispose(),this._spatial?.dispose(),this._spatial=null,this._stereo=null,this._subGraph.dispose(),this.engine._removeNode(this)}getClassName(){return"_WebAudioSoundSource"}_connect(t){return super._connect(t)?(t._inNode&&this._outNode?.connect(t._inNode),!0):!1}_disconnect(t){return super._disconnect(t)?(t._inNode&&this._outNode?.disconnect(t._inNode),!0):!1}_initSpatialProperty(){return this._spatial||(this._spatial=new u(this._subGraph,this._spatialAutoUpdate,this._spatialMinUpdateTime)),this._spatial}}return e._SubGraph=class extends r{get _downstreamNodes(){return this._owner._downstreamNodes??null}get _upstreamNodes(){return this._owner._upstreamNodes??null}_onSubNodesChanged(){super._onSubNodesChanged(),this._owner._inNode.disconnect(),this._owner._subGraph._inNode&&this._owner._inNode.connect(this._owner._subGraph._inNode)}},e})();export{N as _WebAudioSoundSource};
