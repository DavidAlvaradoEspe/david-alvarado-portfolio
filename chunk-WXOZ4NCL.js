import{b as h}from"./chunk-HYMNALGP.js";import{a as c}from"./chunk-FMVB44JJ.js";import{a as f}from"./chunk-DKKLQU3T.js";import{d as x,f as a,g as _,h as d,i as s,k as $,n as i,q as m,x as E}from"./chunk-YCU4LZCU.js";import{d as u,e as Q,f as l}from"./chunk-D7E25M7D.js";import{a as n}from"./chunk-3WG2WLZ4.js";import{f as y}from"./chunk-VBN2JSHE.js";function P(t,e){return`{X: ${t.x.toFixed(e)} Y: ${t.y.toFixed(e)}}`}function O(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}function U(t,e){return`{X: ${t.x.toFixed(e)} Y: ${t.y.toFixed(e)} Z: ${t.z.toFixed(e)}}`}function M(t,e){return t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w}function W(t,e){return`{X: ${t.x.toFixed(e)} Y: ${t.y.toFixed(e)} Z: ${t.z.toFixed(e)} W: ${t.w.toFixed(e)}}`}function I(t,e){return Math.acos(y(M(t,e),-1,1))*2}function L(t,e){let o=new l;return Z(t,e,o),o}function Z(t,e,o){let r=u.Cross(t,e),p=Math.acos(y(O(t,e),-1,1));return l.RotationAxisToRef(r,p,o),o}var S="cachedOperationAxis",q="cachedOperationAngle",X="cachedExecutionId",w=class extends f{constructor(e){super(x,a,o=>this._polymorphicLength(o),"FlowGraphLengthBlock",e)}_polymorphicLength(e){switch(h(e)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return e.length();default:throw new Error(`Cannot compute length of value ${e}`)}}};n("FlowGraphLengthBlock",w);var g=class extends f{constructor(e){super(x,x,o=>this._polymorphicNormalize(o),"FlowGraphNormalizeBlock",e)}_polymorphicNormalize(e){let o=h(e),r;switch(o){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return r=e.normalizeToNew(),this.config?.nanOnZeroLength&&e.length()===0&&r.setAll(NaN),r;default:throw new Error(`Cannot normalize value ${e}`)}}};n("FlowGraphNormalizeBlock",g);var z=class extends c{constructor(e){super(x,x,a,(o,r)=>this._polymorphicDot(o,r),"FlowGraphDotBlock",e)}_polymorphicDot(e,o){switch(h(e)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return e.dot(o);default:throw new Error(`Cannot get dot product of ${e} and ${o}`)}}};n("FlowGraphDotBlock",z);var F=class extends c{constructor(e){super(s,s,s,(o,r)=>u.Cross(o,r),"FlowGraphCrossBlock",e)}};n("FlowGraphCrossBlock",F);var T=class extends c{constructor(e){super(d,a,d,(o,r)=>o.rotate(r),"FlowGraphRotate2DBlock",e)}};n("FlowGraphRotate2DBlock",T);var G=class extends c{constructor(e){super(s,i,s,(o,r)=>o.applyRotationQuaternion(r),"FlowGraphRotate3DBlock",e)}};n("FlowGraphRotate3DBlock",G);function j(t,e){switch(h(t)){case"Vector2":return e.transformVector(t);case"Vector3":return e.transformVector(t);case"Vector4":return t=t,new Q(t.x*e.m[0]+t.y*e.m[1]+t.z*e.m[2]+t.w*e.m[3],t.x*e.m[4]+t.y*e.m[5]+t.z*e.m[6]+t.w*e.m[7],t.x*e.m[8]+t.y*e.m[9]+t.z*e.m[10]+t.w*e.m[11],t.x*e.m[12]+t.y*e.m[13]+t.z*e.m[14]+t.w*e.m[15]);default:throw new Error(`Cannot transform value ${t}`)}}var R=class extends c{constructor(e){let o=e?.vectorType||"Vector3",r=o==="Vector2"?"Matrix2D":o==="Vector3"?"Matrix3D":"Matrix";super(m(o),m(r),m(o),j,"FlowGraphTransformVectorBlock",e)}};n("FlowGraphTransformVectorBlock",R);var B=class extends c{constructor(e){super(s,$,s,(o,r)=>u.TransformCoordinates(o,r),"FlowGraphTransformCoordinatesBlock",e)}};n("FlowGraphTransformCoordinatesBlock",B);var D=class extends f{constructor(e){super(i,i,o=>o.conjugate(),"FlowGraphConjugateBlock",e)}};n("FlowGraphConjugateBlock",D);var N=class extends c{constructor(e){super(i,i,a,(o,r)=>I(o,r),"FlowGraphAngleBetweenBlock",e)}};n("FlowGraphAngleBetweenBlock",N);var A=class extends c{constructor(e){super(s,a,i,(o,r)=>l.RotationAxis(o,r),"FlowGraphQuaternionFromAxisAngleBlock",e)}};n("FlowGraphQuaternionFromAxisAngleBlock",A);var k=class extends E{constructor(e){super(e),this.a=this.registerDataInput("a",i),this.axis=this.registerDataOutput("axis",s),this.angle=this.registerDataOutput("angle",a),this.isValid=this.registerDataOutput("isValid",_)}_updateOutputs(e){let o=e._getExecutionVariable(this,X,-1),r=e._getExecutionVariable(this,S,null),p=e._getExecutionVariable(this,q,null);if(r!=null&&p!==void 0&&p!==null&&o===e.executionId)this.axis.setValue(r,e),this.angle.setValue(p,e);else try{let{axis:V,angle:C}=this.a.getValue(e).toAxisAngle();e._setExecutionVariable(this,S,V),e._setExecutionVariable(this,q,C),e._setExecutionVariable(this,X,e.executionId),this.axis.setValue(V,e),this.angle.setValue(C,e),this.isValid.setValue(!0,e)}catch{this.isValid.setValue(!1,e)}}getClassName(){return"FlowGraphAxisAngleFromQuaternionBlock"}};n("FlowGraphAxisAngleFromQuaternionBlock",k);var Y=class extends c{constructor(e){super(s,s,i,(o,r)=>L(o,r),"FlowGraphQuaternionFromDirectionsBlock",e)}};export{P as a,U as b,W as c,w as d,g as e,z as f,F as g,T as h,G as i,R as j,B as k,D as l,N as m,A as n,k as o,Y as p};
