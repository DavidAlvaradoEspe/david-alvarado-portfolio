import{j as p,k as m}from"./chunk-GCSIM5MW.js";import{b as h}from"./chunk-CW5F3XFN.js";import{c as w}from"./chunk-5H5AAOGY.js";import{a as I,d as R}from"./chunk-CCUABLZY.js";import{a as T}from"./chunk-3WG2WLZ4.js";import{E as O}from"./chunk-CXW3WAWT.js";import{a as i,b as A}from"./chunk-YVY7FGQB.js";var g=(()=>{class t extends w{_gatherImports(r,a){r?(this._webGPUReady=!0,a.push(Promise.all([import("./chunk-OC5VPXI7.js")]))):a.push(Promise.all([import("./chunk-IUNHO44O.js")])),super._gatherImports(r,a)}constructor(r,a=null,n){let s=i({name:r,engine:a||m.LastCreatedEngine,useShaderStore:!0,useAsPostProcess:!0,fragmentShader:t.FragmentUrl},n);s.engine||(s.engine=m.LastCreatedEngine),super(s)}}return t.FragmentUrl="pass",t})(),_=(()=>{class t extends w{_gatherImports(r,a){r?(this._webGPUReady=!0,a.push(Promise.all([import("./chunk-RZPBTNRP.js")]))):a.push(Promise.all([import("./chunk-XWDTFFUA.js")])),super._gatherImports(r,a)}constructor(r,a=null,n){super(A(i({},n),{name:r,engine:a||m.LastCreatedEngine,useShaderStore:!0,useAsPostProcess:!0,fragmentShader:t.FragmentUrl,defines:"#define POSITIVEX"})),this._face=0}get face(){return this._face}set face(r){if(!(r<0||r>5))switch(this._face=r,this._face){case 0:this.updateEffect("#define POSITIVEX");break;case 1:this.updateEffect("#define NEGATIVEX");break;case 2:this.updateEffect("#define POSITIVEY");break;case 3:this.updateEffect("#define NEGATIVEY");break;case 4:this.updateEffect("#define POSITIVEZ");break;case 5:this.updateEffect("#define NEGATIVEZ");break}}}return t.FragmentUrl="passCube",t})();var u=class t extends p{getClassName(){return"PassPostProcess"}constructor(e,r,a=null,n,s,f,c=0,o=!1){let l=i({size:typeof r=="number"?r:void 0,camera:a,samplingMode:n,engine:s,reusable:f,textureType:c,blockCompilation:o},r);super(e,g.FragmentUrl,i({effectWrapper:typeof r=="number"||!r.effectWrapper?new g(e,s,l):void 0},l))}static _Parse(e,r,a,n){return h.Parse(()=>new t(e.name,e.options,r,e.renderTargetSamplingMode,e._engine,e.reusable),e,a,n)}};T("BABYLON.PassPostProcess",u);var S=class t extends p{get face(){return this._effectWrapper.face}set face(e){this._effectWrapper.face=e}getClassName(){return"PassCubePostProcess"}constructor(e,r,a=null,n,s,f,c=0,o=!1){let l=i({size:typeof r=="number"?r:void 0,camera:a,samplingMode:n,engine:s,reusable:f,textureType:c,blockCompilation:o},r);super(e,g.FragmentUrl,i({effectWrapper:typeof r=="number"||!r.effectWrapper?new _(e,s,l):void 0},l))}static _Parse(e,r,a,n){return h.Parse(()=>new t(e.name,e.options,r,e.renderTargetSamplingMode,e._engine,e.reusable),e,a,n)}};I([R()],S.prototype,"face",null);O._RescalePostProcessFactory=t=>new u("rescale",1,null,2,t,!1,0);function K(t,e,r,a,n,s,f,c){let o=e.getEngine();return e.isReady=!1,n=n??e.samplingMode,a=a??e.type,s=s??e.format,f=f??e.width,c=c??e.height,a===-1&&(a=0),new Promise(l=>{let d=new p("postprocess",t,null,null,1,null,n,o,!1,void 0,a,void 0,null,!1,s);d.externalTextureSamplerBinding=!0;let b=o.createRenderTargetTexture({width:f,height:c},{generateDepthBuffer:!1,generateMipMaps:!1,generateStencilBuffer:!1,samplingMode:n,type:a,format:s});d.onEffectCreatedObservable.addOnce(M=>{M.executeWhenCompiled(()=>{d.onApply=P=>{P._bindTexture("textureSampler",e),P.setFloat2("scale",1,1)},r.postProcessManager.directRender([d],b,!0),o.restoreDefaultFramebuffer(),o._releaseTexture(e),d&&d.dispose(),b._swapAndDie(e),e.type=a,e.format=5,e.isReady=!0,l(e)})})})}var E,y;function Q(t){E||(E=new Float32Array(1),y=new Int32Array(E.buffer)),E[0]=t;let e=y[0],r=e>>16&32768,a=e>>12&2047,n=e>>23&255;return n<103?r:n>142?(r|=31744,r|=(n==255?0:1)&&e&8388607,r):n<113?(a|=2048,r|=(a>>114-n)+(a>>113-n&1),r):(r|=n-112<<10|a>>1,r+=a&1,r)}function ee(t){let e=(t&32768)>>15,r=(t&31744)>>10,a=t&1023;return r===0?(e?-1:1)*Math.pow(2,-14)*(a/Math.pow(2,10)):r==31?a?NaN:(e?-1:1)*(1/0):(e?-1:1)*Math.pow(2,r-15)*(1+a/Math.pow(2,10))}export{K as a,Q as b,ee as c};
